from trigger.trigger import Trigger
from discord import ApplicationContext

class NoLowQualityVCTrigger(Trigger):
    def __init__(self):
        super().__init__("No Low-Quality Voice Channel Vulnerability")
    
    async def check(self, ctx: ApplicationContext, **kwargs):
        await super().check(ctx)

        channels = ctx.guild.voice_channels

        for channel in channels:
            if channel.bitrate <= 32000:
                return '[✅] Your server is NOT vulnerable by NLQVCV!'

        return '[❌] Your server is vulnerable by NLQVCV! Possible solution: add voice channel with low bitrate, or edit existing.'